import requests

url = "http://192.168.1.29:5000/generate"
data = {
    "role_system": {"role": "system", "content": "Eres un experto en abrir y cerrar operaciones de traiding, El usuario va a pasar una serie de valores close de btc y tu deberas hacer el analisis tecnico y decidir si abrir una operacion a la baja <short>, al alza <long> o no abrir una operacion <wait>, tambien si el usuario indica que tiene abierta una operacion debes decirle si debe cerrarla <close> o no <wait>. Para referirte a una operacion debes nombrar la accion de la forma <short> o <long> o <wait> o <close>"},
    "context": [{"role": "user", "content": [99988.89172608376, 99332.22552392006, 99405.62519491196, 99667.39131651878, 99905.93318867683, 99830.64182209969, 99641.42834361077, 100031.19919981956, 100189.64046936035, 100031.88937067986, 100352.97254058838, 100285.56167037964, 100220.13033568382, 100213.48900972366, 100877.65925142288, 99884.28378364563, 100807.61632052422, 101607.41768483163, 101380.67773438455, 101357.13977090835, 101557.5089202118, 101230.32714961053, 101132.68679572106, 101319.85485875129, 101212.48309573173, 101971.52359645843, 101927.503244133, 101950.42946525573, 101606.31654859544, 101607.71885029793, 101793.01090344429, 101717.24269154549, 101695.07565836907, 101466.25892106057, 101448.61564415932, 101484.09983779908, 101219.92439246178, 101085.80223432541, 101322.96062762261, 101510.68710162163, 101539.71192343712, 100938.54173272132, 100813.14709882736, 101180.92346457482, 100710.94220583915, 100957.37084864615, 101033.36493464469, 101291.8339218235, 101343.0885196209, 101963.4642830944, 101740.95947201729, 101616.35226033212, 102209.4819605255, 102051.23205654144, 101667.31196694374, 101631.61758490562, 101888.31095068931, 102129.46606069565, 102153.52165231705, 102510.65683825493, 102788.19022687912, 102650.57329447746, 102835.44497082711, 102591.1307605648, 102951.21172122002, 103022.45931398391, 103042.94170283317, 103100.25098135948, 103002.76748448372, 102741.27743122101, 103103.7896755886, 104515.93572426797]}]
}

response = requests.post(url, json=data, stream=True)
response.encoding = 'utf-8'

for chunk in response.iter_content(decode_unicode=True):
    if chunk:
        print(chunk, end='', flush=True)